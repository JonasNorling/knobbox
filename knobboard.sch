EESchema Schematic File Version 2  date Sun 26 May 2013 03:42:57 PM CEST
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:special
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:bourns-encoder
LIBS:stm32
LIBS:spi-flash
LIBS:nhd-lcd
LIBS:r-network
LIBS:lm1117
LIBS:74hc
LIBS:dogs102-6
LIBS:pdt-transistor
LIBS:tact
LIBS:knobboard-cache
EELAYER 25  0
EELAYER END
$Descr A4 11700 8267
encoding utf-8
Sheet 1 10
Title ""
Date "26 may 2013"
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
Connection ~ 6250 5400
Connection ~ 6250 5400
NoConn ~ 8350 6100
Wire Wire Line
	8200 6100 8350 6100
Wire Wire Line
	3600 3500 2950 3500
Wire Wire Line
	2950 1800 3600 1800
Wire Wire Line
	2950 5750 3600 5750
Wire Wire Line
	2950 5550 3600 5550
Wire Wire Line
	3600 3200 2950 3200
Wire Wire Line
	2950 3000 3600 3000
Wire Wire Line
	2950 2800 3600 2800
Wire Wire Line
	3600 2100 2950 2100
Wire Wire Line
	2950 1700 3600 1700
Wire Wire Line
	6700 4400 5950 4400
Wire Wire Line
	5950 4400 5950 6950
Wire Wire Line
	5950 6950 10400 6950
Wire Wire Line
	10400 6950 10400 5000
Wire Wire Line
	10400 5000 10200 5000
Wire Wire Line
	10200 2500 10350 2500
Wire Wire Line
	10350 2500 10350 800 
Wire Wire Line
	8200 4500 8800 4500
Wire Wire Line
	8200 4400 8800 4400
Wire Wire Line
	8200 4300 8800 4300
Wire Wire Line
	8200 4200 8800 4200
Connection ~ 6150 4500
Wire Wire Line
	6150 2100 6150 5800
Wire Wire Line
	6150 5800 6700 5800
Connection ~ 6350 4200
Wire Wire Line
	6350 5500 6350 1250
Wire Wire Line
	6350 5500 6700 5500
Wire Wire Line
	6700 6000 6550 6000
Wire Wire Line
	6550 6000 6550 5050
Wire Wire Line
	6550 5050 8550 5050
Wire Wire Line
	8550 5050 8550 4800
Wire Wire Line
	8550 4800 8200 4800
Connection ~ 6050 3400
Wire Wire Line
	6700 4600 6050 4600
Connection ~ 6450 3100
Wire Wire Line
	6450 4300 6700 4300
Connection ~ 6250 4100
Wire Wire Line
	6250 4100 6700 4100
Connection ~ 6050 2200
Wire Wire Line
	6050 3400 6700 3400
Wire Wire Line
	6450 3100 6700 3100
Connection ~ 6250 2900
Wire Wire Line
	6250 2900 6700 2900
Wire Wire Line
	6700 3500 6550 3500
Wire Wire Line
	6550 3500 6550 2650
Wire Wire Line
	6550 2650 8500 2650
Wire Wire Line
	8500 2650 8500 2350
Wire Wire Line
	8500 2350 8200 2350
Wire Wire Line
	8800 3200 8200 3200
Wire Wire Line
	8800 3000 8200 3000
Wire Wire Line
	6700 2000 6150 2000
Wire Wire Line
	6150 2000 6150 800 
Wire Wire Line
	6150 800  10350 800 
Wire Wire Line
	5900 2550 5900 2500
Wire Wire Line
	5900 2550 8600 2550
Wire Wire Line
	8600 2550 8600 2250
Wire Wire Line
	8600 2250 8200 2250
Connection ~ 6350 1800
Wire Wire Line
	6350 1250 8800 1250
Connection ~ 6250 1700
Wire Wire Line
	5600 2100 6700 2100
Wire Wire Line
	5600 1800 6700 1800
Wire Wire Line
	6700 2300 5600 2300
Wire Wire Line
	8200 1800 8800 1800
Wire Wire Line
	8200 2000 8800 2000
Wire Wire Line
	8200 2100 8800 2100
Wire Wire Line
	8200 1900 8800 1900
Wire Wire Line
	6700 1700 5600 1700
Wire Wire Line
	6700 1900 5600 1900
Wire Wire Line
	6700 2200 5600 2200
Wire Wire Line
	8800 1150 6250 1150
Wire Wire Line
	8800 1350 6450 1350
Connection ~ 6450 1900
Wire Wire Line
	5900 2500 5600 2500
Wire Wire Line
	8200 2900 8800 2900
Wire Wire Line
	8200 3100 8800 3100
Wire Wire Line
	8200 3450 8800 3450
Wire Wire Line
	6350 3000 6700 3000
Wire Wire Line
	6150 3300 6700 3300
Connection ~ 6150 2100
Wire Wire Line
	6350 4200 6700 4200
Connection ~ 6350 3000
Wire Wire Line
	6700 4500 6150 4500
Connection ~ 6150 3300
Wire Wire Line
	8200 3550 8500 3550
Wire Wire Line
	8500 3550 8500 3750
Wire Wire Line
	8500 3750 6550 3750
Wire Wire Line
	6550 3750 6550 4700
Wire Wire Line
	6550 4700 6700 4700
Wire Wire Line
	6700 5400 6250 5400
Wire Wire Line
	6700 5600 6450 5600
Wire Wire Line
	6450 5600 6450 1350
Connection ~ 6450 4300
Wire Wire Line
	6700 5900 6050 5900
Wire Wire Line
	6050 5900 6050 2200
Connection ~ 6050 4600
Wire Wire Line
	6700 5700 6650 5700
Wire Wire Line
	6650 5700 6650 6400
Wire Wire Line
	8200 5500 8800 5500
Wire Wire Line
	8200 5600 8800 5600
Wire Wire Line
	8200 5700 8800 5700
Wire Wire Line
	8200 5800 8800 5800
Wire Wire Line
	8200 6000 8800 6000
Wire Wire Line
	8200 4700 8400 4700
Wire Wire Line
	8400 4700 8400 3850
Wire Wire Line
	8400 3850 6650 3850
Wire Wire Line
	6650 3850 6650 3200
Wire Wire Line
	6650 3200 6700 3200
Wire Wire Line
	6250 5400 6250 1150
Wire Wire Line
	3600 1900 2950 1900
Wire Wire Line
	2950 2200 3600 2200
Wire Wire Line
	3600 2900 2950 2900
Wire Wire Line
	3600 3100 2950 3100
Wire Wire Line
	3600 5450 2950 5450
Wire Wire Line
	3600 5650 2950 5650
Wire Wire Line
	3600 2000 2950 2000
Wire Wire Line
	2950 3400 3600 3400
Wire Wire Line
	2950 3600 3600 3600
Wire Wire Line
	2950 3700 3600 3700
Wire Wire Line
	2950 3800 3600 3800
Wire Wire Line
	2950 4000 3600 4000
Wire Wire Line
	2950 4100 3600 4100
Wire Wire Line
	2950 4200 3600 4200
Wire Wire Line
	2950 4300 3600 4300
Wire Wire Line
	2950 4400 3600 4400
Wire Wire Line
	2950 4700 3600 4700
Wire Wire Line
	2950 4800 3600 4800
Wire Wire Line
	2950 4900 3600 4900
Wire Wire Line
	2950 5000 3600 5000
$Comp
L TST TP11
U 1 1 51988EC0
P 6250 5400
F 0 "TP11" H 6250 5700 40  0000 C CNN
F 1 "TST" H 6250 5650 30  0000 C CNN
	1    6250 5400
	-1   0    0    1   
$EndComp
$Sheet
S 1500 2700 1450 2400
U 50CC7DE6
F0 "panel" 60
F1 "panel.sch" 60
F2 "BACKLIGHT_PWM" I R 2950 2800 60 
F3 "LCD_SPI_MOSI" I R 2950 3200 60 
F4 "LCD_SPI_SCK" I R 2950 3100 60 
F5 "LCD_A0" I R 2950 3000 60 
F6 "LCD_CS" I R 2950 2900 60 
F7 "LED4" I R 2950 4700 60 
F8 "LED3" I R 2950 4800 60 
F9 "LED2" I R 2950 4900 60 
F10 "LED1" I R 2950 5000 60 
F11 "BTN5" O R 2950 4400 60 
F12 "BTN4" O R 2950 4300 60 
F13 "BTN3" O R 2950 4200 60 
F14 "BTN2" O R 2950 4100 60 
F15 "BTN1" O R 2950 4000 60 
F16 "ENCODER2" O R 2950 3400 60 
F17 "ENCODER1" O R 2950 3500 60 
F18 "ENC_BTN" O R 2950 3800 60 
F19 "ENC_LED2" I R 2950 3600 60 
F20 "ENC_LED1" I R 2950 3700 60 
$EndSheet
$Sheet
S 1500 5300 1450 600 
U 50CC8305
F0 "flash" 60
F1 "flash.sch" 60
F2 "FLASH_SPI_MOSI" I R 2950 5450 60 
F3 "FLASH_SPI_SCK" I R 2950 5650 60 
F4 "FLASH_SPI_MISO" O R 2950 5550 60 
F5 "FLASH_CS" I R 2950 5750 60 
$EndSheet
$Sheet
S 3600 1550 2000 4350
U 4F7EF61F
F0 "stm32" 60
F1 "stm32.sch" 60
F2 "MIDI_RX" I L 3600 1900 60 
F3 "USB_DP" B L 3600 2100 60 
F4 "USB_DM" B L 3600 2200 60 
F5 "LED_SHIFT" O R 5600 2300 60 
F6 "LED_OE" O R 5600 2200 60 
F7 "LED_LOAD" O R 5600 2100 60 
F8 "BTN_CE" O R 5600 1900 60 
F9 "BTN_LOAD" O R 5600 1800 60 
F10 "BTN_SHIFT" I R 5600 2500 60 
F11 "SHIFT_CLK" O R 5600 1700 60 
F12 "MIDI_TX2" O L 3600 1800 60 
F13 "MIDI_TX1" O L 3600 1700 60 
F14 "LCD_SPI_MOSI" O L 3600 3200 60 
F15 "LCD_SPI_SCK" O L 3600 3100 60 
F16 "LCD_A0" O L 3600 3000 60 
F17 "LCD_CS" O L 3600 2900 60 
F18 "BACKLIGHT_PWM" O L 3600 2800 60 
F19 "ENCODER2" I L 3600 3400 60 
F20 "ENCODER1" I L 3600 3500 60 
F21 "LED4" O L 3600 4700 60 
F22 "LED3" O L 3600 4800 60 
F23 "LED2" O L 3600 4900 60 
F24 "LED1" O L 3600 5000 60 
F25 "BTN5" I L 3600 4000 60 
F26 "BTN4" I L 3600 4100 60 
F27 "BTN3" I L 3600 4200 60 
F28 "BTN2" I L 3600 4300 60 
F29 "BTN1" I L 3600 4400 60 
F30 "FLASH_CS" O L 3600 5750 60 
F31 "FLASH_SPI_SCK" O L 3600 5650 60 
F32 "FLASH_SPI_MOSI" O L 3600 5450 60 
F33 "FLASH_SPI_MISO" I L 3600 5550 60 
F34 "MIDI_RX2" I L 3600 2000 60 
F35 "ENC_BTN" I L 3600 3800 60 
F36 "ENC_LED2" O L 3600 3600 60 
F37 "ENC_LED1" O L 3600 3700 60 
$EndSheet
$Sheet
S 1500 1550 1450 1000
U 4F80537C
F0 "io" 60
F1 "io.sch" 60
F2 "MIDI_RX" O R 2950 1900 60 
F3 "MIDI_TX" I R 2950 1700 60 
F4 "USB_DM" B R 2950 2200 60 
F5 "USB_DP" B R 2950 2100 60 
F6 "MIDI_RX2" O R 2950 2000 60 
F7 "MIDI_TX2" I R 2950 1800 60 
$EndSheet
$Sheet
S 6700 5250 1500 1000
U 4F92B0F3
F0 "encoders4" 60
F1 "encoders4.sch" 60
F2 "SHIFT_CLK" I L 6700 5400 60 
F3 "BTN_LOAD" I L 6700 5500 60 
F4 "BTN_CE" I L 6700 5600 60 
F5 "BTNSHIFT_OUT" O R 8200 6000 60 
F6 "BTNSHIFT_IN" I L 6700 5700 60 
F7 "LEDSHIFT_OUT" O R 8200 6100 60 
F8 "LED_OE" I L 6700 5900 60 
F9 "LED_LOAD" I L 6700 5800 60 
F10 "LEDSHIFT_IN" I L 6700 6000 60 
F11 "SW4" O R 8200 5800 60 
F12 "SW3" O R 8200 5700 60 
F13 "SW2" O R 8200 5600 60 
F14 "SW1" O R 8200 5500 60 
$EndSheet
$Sheet
S 6700 3950 1500 1000
U 4F92A9C4
F0 "encoders3" 60
F1 "encoders3.sch" 60
F2 "SHIFT_CLK" I L 6700 4100 60 
F3 "BTN_LOAD" I L 6700 4200 60 
F4 "BTN_CE" I L 6700 4300 60 
F5 "BTNSHIFT_OUT" O R 8200 4700 60 
F6 "BTNSHIFT_IN" I L 6700 4400 60 
F7 "LEDSHIFT_OUT" O R 8200 4800 60 
F8 "LED_OE" I L 6700 4600 60 
F9 "LED_LOAD" I L 6700 4500 60 
F10 "LEDSHIFT_IN" I L 6700 4700 60 
F11 "SW4" O R 8200 4500 60 
F12 "SW3" O R 8200 4400 60 
F13 "SW2" O R 8200 4300 60 
F14 "SW1" O R 8200 4200 60 
$EndSheet
$Comp
L CONN_1 H10
U 1 1 4F90F9F5
P 3600 1000
F 0 "H10" H 3680 1000 40  0000 L CNN
F 1 "CONN_1" H 3600 1055 30  0001 C CNN
	1    3600 1000
	0    -1   -1   0   
$EndComp
$Comp
L CONN_1 H9
U 1 1 4F90F9F3
P 3500 1000
F 0 "H9" H 3580 1000 40  0000 L CNN
F 1 "CONN_1" H 3500 1055 30  0001 C CNN
	1    3500 1000
	0    -1   -1   0   
$EndComp
Text Notes 3400 760  2    60   ~ 0
Mounting holes
$Comp
L CONN_1 H8
U 1 1 4F90F606
P 3400 1000
F 0 "H8" H 3480 1000 40  0000 L CNN
F 1 "CONN_1" H 3400 1055 30  0001 C CNN
	1    3400 1000
	0    -1   -1   0   
$EndComp
$Comp
L CONN_1 H7
U 1 1 4F90F605
P 3300 1000
F 0 "H7" H 3380 1000 40  0000 L CNN
F 1 "CONN_1" H 3300 1055 30  0001 C CNN
	1    3300 1000
	0    -1   -1   0   
$EndComp
$Comp
L CONN_1 H6
U 1 1 4F90F604
P 3200 1000
F 0 "H6" H 3280 1000 40  0000 L CNN
F 1 "CONN_1" H 3200 1055 30  0001 C CNN
	1    3200 1000
	0    -1   -1   0   
$EndComp
$Comp
L CONN_1 H5
U 1 1 4F90F602
P 3100 1000
F 0 "H5" H 3180 1000 40  0000 L CNN
F 1 "CONN_1" H 3100 1055 30  0001 C CNN
	1    3100 1000
	0    -1   -1   0   
$EndComp
$Comp
L CONN_1 H4
U 1 1 4F90F601
P 3000 1000
F 0 "H4" H 3080 1000 40  0000 L CNN
F 1 "CONN_1" H 3000 1055 30  0001 C CNN
	1    3000 1000
	0    -1   -1   0   
$EndComp
$Comp
L CONN_1 H3
U 1 1 4F90F5FF
P 2900 1000
F 0 "H3" H 2980 1000 40  0000 L CNN
F 1 "CONN_1" H 2900 1055 30  0001 C CNN
	1    2900 1000
	0    -1   -1   0   
$EndComp
$Comp
L CONN_1 H2
U 1 1 4F90F5FD
P 2800 1000
F 0 "H2" H 2880 1000 40  0000 L CNN
F 1 "CONN_1" H 2800 1055 30  0001 C CNN
	1    2800 1000
	0    -1   -1   0   
$EndComp
$Comp
L CONN_1 H1
U 1 1 4F90F5D6
P 2700 1000
F 0 "H1" H 2780 1000 40  0000 L CNN
F 1 "CONN_1" H 2700 1055 30  0001 C CNN
	1    2700 1000
	0    -1   -1   0   
$EndComp
$Sheet
S 6700 2750 1500 900 
U 4F905A24
F0 "encoders2" 60
F1 "encoders2.sch" 60
F2 "SHIFT_CLK" I L 6700 2900 60 
F3 "BTN_LOAD" I L 6700 3000 60 
F4 "BTN_CE" I L 6700 3100 60 
F5 "BTNSHIFT_OUT" O R 8200 3450 60 
F6 "BTNSHIFT_IN" I L 6700 3200 60 
F7 "LEDSHIFT_OUT" O R 8200 3550 60 
F8 "LED_OE" I L 6700 3400 60 
F9 "LED_LOAD" I L 6700 3300 60 
F10 "LEDSHIFT_IN" I L 6700 3500 60 
F11 "SW4" O R 8200 3200 60 
F12 "SW3" O R 8200 3100 60 
F13 "SW2" O R 8200 3000 60 
F14 "SW1" O R 8200 2900 60 
$EndSheet
$Sheet
S 8800 1000 1400 5250
U 4F81A858
F0 "switchbus" 60
F1 "switchbus.sch" 60
F2 "SW16" I L 8800 5800 60 
F3 "SW15" I L 8800 5700 60 
F4 "SW14" I L 8800 5600 60 
F5 "SW13" I L 8800 5500 60 
F6 "SW12" I L 8800 4500 60 
F7 "SW11" I L 8800 4400 60 
F8 "SW10" I L 8800 4300 60 
F9 "SW9" I L 8800 4200 60 
F10 "SW8" I L 8800 3200 60 
F11 "SW7" I L 8800 3100 60 
F12 "SW6" I L 8800 3000 60 
F13 "SW5" I L 8800 2900 60 
F14 "SW4" I L 8800 2100 60 
F15 "SW3" I L 8800 2000 60 
F16 "SW2" I L 8800 1900 60 
F17 "SW1" I L 8800 1800 60 
F18 "BTNSHIFT_OUT0" O R 10200 2500 60 
F19 "BTN_CE" I L 8800 1350 60 
F20 "BTN_LOAD" I L 8800 1250 60 
F21 "SHIFT_CLK" I L 8800 1150 60 
F22 "BTNSHIFT_IN0" I L 8800 3450 60 
F23 "BTNSHIFT_OUT1" O R 10200 5000 60 
F24 "BTNSHIFT_IN1" I L 8800 6000 60 
$EndSheet
$Comp
L GND #PWR01
U 1 1 4F8DA5D4
P 6650 6400
F 0 "#PWR01" H 6650 6400 30  0001 C CNN
F 1 "GND" H 6650 6330 30  0001 C CNN
	1    6650 6400
	1    0    0    -1  
$EndComp
$Sheet
S 6700 1550 1500 900 
U 4F7E05A5
F0 "encoders" 60
F1 "encoders.sch" 60
F2 "SW4" O R 8200 2100 60 
F3 "SW3" O R 8200 2000 60 
F4 "SW2" O R 8200 1900 60 
F5 "SW1" O R 8200 1800 60 
F6 "SHIFT_CLK" I L 6700 1700 60 
F7 "BTN_LOAD" I L 6700 1800 60 
F8 "BTN_CE" I L 6700 1900 60 
F9 "BTNSHIFT_OUT" O R 8200 2250 60 
F10 "BTNSHIFT_IN" I L 6700 2000 60 
F11 "LEDSHIFT_OUT" O R 8200 2350 60 
F12 "LED_OE" I L 6700 2200 60 
F13 "LED_LOAD" I L 6700 2100 60 
F14 "LEDSHIFT_IN" I L 6700 2300 60 
$EndSheet
Text Notes 750  6000 0    60   ~ 0
STM32\n3V3 vreg\nMIDI I/O -- needs 5V\nmicro-USB\npins for USART1 programming\nencoders -- 2 LEDs, button, gray output\n   -- needs filter circuit 4R+2C?\n   -- blue and green LEDs have Vf up to 4V\n   -- so I need a level-changing buffer to drive the anode at 5V\n   -- use a latch instead of buffer, so the LEDs can be kept on all the time\nLCD COG or OLED display, on SPI\n2 buttons, at least\n   -- mode/power, ok, plypause, back\nunpopulated CV output circuitry?\nSPI EEPROM 8mbit\n"soft" power button -- keep idle power at uA levels\nSPI LCD display NHD-C12832A1Z-FSW-FBW-3V3 (Newhaven Display, 8.68€ @ Mouser)
$EndSCHEMATC
